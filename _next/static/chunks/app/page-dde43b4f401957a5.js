(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3795:function(e,t,a){Promise.resolve().then(a.bind(a,3344))},3344:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var r,s,n=a(3827),l=a(4090);let c={BASE_URL:"https://swapi.dev/api",ENDPOINTS:{PEOPLE:"/people",PLANETS:"/planets"}};class o{static async getAll(e){try{let t=await fetch(e||"".concat(c.BASE_URL).concat(c.ENDPOINTS.PEOPLE));if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return t.json()}catch(e){throw Error("Failed to fetch characters: ".concat(e instanceof Error?e.message:"Unknown error"))}}}(r=s||(s={})).ALL="all",r.PLANETS="planets",r.HOMEWORLD="homeworld";class i{static async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.ALL;try{let t="".concat(c.BASE_URL).concat(c.ENDPOINTS.PLANETS);e!==s.ALL&&(t+="?filter=".concat(e));let a=await fetch(t);if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));return await a.json()}catch(e){if(e instanceof Error)throw Error("Failed to fetch planets: ".concat(e.message));throw Error("Failed to fetch planets")}}static async getAllPlanets(){try{let e=[],t="".concat(c.BASE_URL).concat(c.ENDPOINTS.PLANETS);for(;t;){let a=await fetch(t);if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));let r=await a.json();e=[...e,...r.results],t=r.next}return e}catch(e){throw Error("Failed to fetch planets: ".concat(e instanceof Error?e.message:"Unknown error"))}}static async getById(e){try{let t=await fetch(e);if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return{name:(await t.json()).name}}catch(e){throw Error("Failed to fetch planet: ".concat(e instanceof Error?e.message:"Unknown error"))}}}var d=a(8745),h=a(5460),u=e=>{let{onFilterChange:t}=e,[a,r]=(0,l.useState)(!1),[s,c]=(0,l.useState)("All"),[o,u]=(0,l.useState)([]),[m,p]=(0,l.useState)(!0);(0,l.useEffect)(()=>{(async()=>{try{p(!0);let e=(await i.getAllPlanets()).sort((e,t)=>e.name.localeCompare(t.name));u(e)}catch(e){console.error("Failed to fetch planets:",e)}finally{p(!1)}})()},[]);let g=e=>{c(e),r(!1),t(e)};return(0,n.jsx)("nav",{className:"py-4",children:(0,n.jsx)("div",{className:"container",children:(0,n.jsx)("div",{className:"filter",children:(0,n.jsxs)("div",{className:"label flex items-center gap-3",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Filter By:"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{onClick:()=>r(!a),className:"flex items-center gap-2 cursor-pointer",children:[(0,n.jsx)("p",{className:"text-gray-900",children:m?"Loading planets...":s}),(0,n.jsx)("svg",{className:"arrow transition-transform ".concat(a?"rotate-180":""),width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M2.5 4.5L6 8L9.5 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),(0,n.jsx)(d.M,{children:a&&!m&&(0,n.jsxs)(h.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute top-full left-0 mt-1 w-48 bg-white shadow-lg rounded-md overflow-hidden z-10 max-h-[300px] overflow-y-auto",children:[(0,n.jsx)("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 \n                        ".concat("All"===s?"bg-gray-50":""),onClick:()=>g("All"),children:"All"}),o.map(e=>(0,n.jsx)("div",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100 \n                          ".concat(s===e.name?"bg-gray-50":""),onClick:()=>g(e.name),children:e.name},e.url))]})})]})]})})})})},m=e=>{let{character:t}=e,[a,r]=(0,l.useState)("Loading..."),s=t.url.split("/").filter(Boolean).pop()||"1";return(0,l.useEffect)(()=>{(async()=>{try{let e=await i.getById(t.homeworld);r(e.name)}catch(e){r("Unknown")}})()},[t.homeworld]),(0,n.jsx)(h.E.div,{whileHover:{scale:1.02},className:"border rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:(0,n.jsx)("div",{className:"container-people",children:(0,n.jsxs)("figure",{children:[(0,n.jsx)("img",{src:"https://picsum.photos/seed/".concat(s,"/400/300"),alt:t.name,className:"w-full h-64 object-cover",loading:"lazy"}),(0,n.jsxs)("div",{className:"content space-y-4 p-6",children:[(0,n.jsx)("p",{className:"text-xl font-bold text-gray-900",children:t.name}),(0,n.jsx)("p",{className:"text-gray-500",children:a}),(0,n.jsxs)("p",{className:"text-sm uppercase text-gray-600",children:["Height • ",t.height]}),(0,n.jsxs)("p",{className:"text-sm uppercase text-gray-600",children:["Mass • ",t.mass]}),(0,n.jsxs)("p",{className:"text-sm uppercase text-gray-600",children:["Gender • ",t.gender]})]})]})})})},p=e=>{let{children:t,variant:a="primary",size:r="md",isLoading:s=!1,fullWidth:l=!1,leftIcon:c,rightIcon:o,className:i="",disabled:d,...h}=e;return(0,n.jsx)("button",{className:"\n        ".concat("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2","\n        ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",outline:"border-2 border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-gray-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[a],"\n        ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r],"\n        ").concat(s?"cursor-not-allowed opacity-70":"","\n        ").concat(l?"w-full":"","\n        ").concat(d?"cursor-not-allowed opacity-50":"","\n        ").concat(i,"\n      "),disabled:d||s,...h,children:s?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):(0,n.jsxs)(n.Fragment,{children:[c&&(0,n.jsx)("span",{className:"mr-2",children:c}),t,o&&(0,n.jsx)("span",{className:"ml-2",children:o})]})})},g=()=>{let[e,t]=(0,l.useState)([]),[a,r]=(0,l.useState)([]),[s,c]=(0,l.useState)(!0),[d,g]=(0,l.useState)(!1),[x,y]=(0,l.useState)(null),[f,w]=(0,l.useState)(null),j=async e=>{try{g(!!e);let a=await o.getAll(e);e?(t(e=>[...e,...a.results]),r(e=>[...e,...a.results])):(t(a.results),r(a.results)),w(a.next)}catch(e){y(e instanceof Error?e.message:"An error occurred")}finally{c(!1),g(!1)}};(0,l.useEffect)(()=>{j()},[]);let N=async t=>{if("All"===t){r(e);return}r((await Promise.all(e.map(async e=>{try{return(await i.getById(e.homeworld)).name===t?e:null}catch(e){return null}}))).filter(e=>null!==e))};return s?(0,n.jsx)("div",{children:"Loading..."}):x?(0,n.jsxs)("div",{children:["Error: ",x]}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(u,{onFilterChange:N}),(0,n.jsx)(h.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-4",children:a.map((e,t)=>{let a=e.url.split("/").filter(Boolean).pop();return(0,n.jsx)(h.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*t},children:(0,n.jsx)(m,{character:e})},a)})}),f&&(0,n.jsx)("div",{className:"flex justify-center pb-8",children:(0,n.jsx)(p,{variant:"outline",size:"lg",isLoading:d,onClick:()=>{f&&j(f)},children:"LOAD MORE"})})]})}}},function(e){e.O(0,[740,971,69,744],function(){return e(e.s=3795)}),_N_E=e.O()}]);